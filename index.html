<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Counting Down to Us</title>
    <style>
        :root { --sky: #87CEEB; --ground: #e0d0b0; }
        body, html { margin: 0; padding: 0; width: 100%; height: 100%; overflow: hidden; font-family: 'Arial', sans-serif; }
        
        /* The World */
        #world { 
            position: relative; width: 100%; height: 100vh; 
            transition: background 3s ease; 
            background: var(--sky);
            display: flex; flex-direction: column; align-items: center;
        }

        #ground { 
            position: absolute; bottom: 0; width: 100%; height: 25vh; 
            background: var(--ground); border-top: 4px solid #c4b08d;
        }

        /* The Timer */
        #ui { margin-top: 10vh; text-align: center; color: white; text-shadow: 2px 2px 10px rgba(0,0,0,0.3); z-index: 10; }
        h1 { font-size: 2.5rem; margin: 0; letter-spacing: 2px; }
        #countdown { font-size: 1.8rem; margin-top: 10px; font-weight: bold; }

        /* The Characters */
        .char { 
            position: absolute; bottom: 18vh; font-size: 60px; 
            transition: all 1s linear; filter: drop-shadow(0 5px 5px rgba(0,0,0,0.2));
        }

        /* Weather Effects */
        #weather-layer { position: absolute; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 5; }
        .rain { position: absolute; background: white; width: 2px; height: 15px; opacity: 0.6; animation: fall linear infinite; }
        @keyframes fall { to { transform: translateY(100vh); } }

        /* Music Box */
        #music {
            position: absolute; bottom: 30px; background: rgba(255,255,255,0.9);
            padding: 15px 25px; border-radius: 50px; box-shadow: 0 10px 20px rgba(0,0,0,0.1);
            display: flex; align-items: center; gap: 15px; z-index: 20;
        }
        button { background: #ff4b2b; color: white; border: none; padding: 8px 15px; border-radius: 20px; cursor: pointer; }
    </style>
</head>
<body>

<div id="world">
    <div id="weather-layer"></div>
    
    <div id="ui">
        <h1 id="title">Waiting for March 1st</h1>
        <div id="countdown">Calculating...</div>
    </div>

    <div id="ground"></div>
    <div id="char-1" class="char">üö∂‚Äç‚ôÇÔ∏è</div>
    <div id="char-2" class="char">üö∂‚Äç‚ôÄÔ∏è</div>

    <div id="music">
        <div><strong>Today's Song:</strong> <span id="song-title">Thinking of You</span></div>
        <button onclick="window.open('https://www.youtube.com', '_blank')">Play</button>
    </div>
</div>

<script>
    // 1. SETTINGS
    // Change "2026-02-02" to the day you guys actually stopped talking to make them move from the edges.
    const START_DATE = new Date("2026-02-02T00:00:00").getTime(); 
    const END_DATE = new Date("2026-03-01T00:00:00-06:00").getTime(); // 12AM CST

    function update() {
        const now = new Date().getTime();
        const total = END_DATE - START_DATE;
        const elapsed = now - START_DATE;
        const remaining = END_DATE - now;

        // Progress 0 to 1
        let progress = elapsed / total;
        if (progress > 1) progress = 1;

        // Timer Text
        if (remaining <= 0) {
            document.getElementById("countdown").innerHTML = "00:00:00";
            document.getElementById("title").innerHTML = "I Love You";
            document.getElementById("char-1").innerHTML = "üë©‚Äç‚ù§Ô∏è‚Äçüë®";
            document.getElementById("char-2").style.display = "none";
            document.getElementById("char-1").style.left = "50%";
            document.getElementById("char-1").style.transform = "translateX(-50%)";
        } else {
            const d = Math.floor(remaining / 86400000);
            const h = Math.floor((remaining % 86400000) / 3600000);
            const m = Math.floor((remaining % 3600000) / 60000);
            const s = Math.floor((remaining % 60000) / 1000);
            document.getElementById("countdown").innerHTML = `${d}d ${h}h ${m}m ${s}s`;

            // Movement: Char 1 moves from 5% to 45%, Char 2 moves from 95% to 55%
            document.getElementById("char-1").style.left = (5 + (progress * 40)) + "%";
            document.getElementById("char-2").style.left = (95 - (progress * 40)) + "%";
        }

        // Sky Logic
        const hour = new Date().getHours();
        const world = document.getElementById("world");
        if (hour >= 6 && hour < 10) world.style.background = "linear-gradient(#FF9D6C, #FFFB7D)";
        else if (hour >= 10 && hour < 17) world.style.background = "#87CEEB";
        else if (hour >= 17 && hour < 20) world.style.background = "linear-gradient(#2c3e50, #fd746c)";
        else world.style.background = "#1a1a2e";
    }

    // Weather Simulation (Turn on manually for now or use the API logic from before)
    function setRain(on) {
        const layer = document.getElementById("weather-layer");
        if (!on) return;
        for(let i=0; i<60; i++) {
            let drop = document.createElement("div");
            drop.className = "rain";
            drop.style.left = Math.random() * 100 + "vw";
            drop.style.animationDuration = (Math.random() * 0.5 + 0.5) + "s";
            layer.appendChild(drop);
        }
    }

    setInterval(update, 1000);
    update();
    // setRain(true); // Uncomment this line to see rain!
</script>
</body>
</html>
