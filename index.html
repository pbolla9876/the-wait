<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Wait | March 1st 2026</title>
    <style>
        :root {
            --sky-color: #87CEEB;
            --ground-color: #4a7c44;
        }

        body, html {
            margin: 0; padding: 0; width: 100%; height: 100%;
            overflow: hidden; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        /* Dynamic Sky Background */
        #world {
            position: relative; width: 100%; height: 100vh;
            transition: background 2s ease;
            background: var(--sky-color);
            display: flex; flex-direction: column; align-items: center;
        }

        /* The Ground/Path */
        #path {
            position: absolute; bottom: 0; width: 100%; height: 30vh;
            background: #e0d0b0; border-top: 5px solid #c4b08d;
        }

        /* Characters */
        .character {
            position: absolute; bottom: 20vh; width: 60px; height: 100px;
            font-size: 50px; display: flex; align-items: center; 
            justify-content: center; transition: all 0.5s linear;
            animation: bounce 1s infinite ease-in-out;
        }

        #timer-display {
            margin-top: 50px; text-align: center; color: white;
            text-shadow: 2px 2px 8px rgba(0,0,0,0.5); z-index: 10;
        }

        h1 { font-size: 3rem; margin-bottom: 0; }
        #countdown { font-size: 1.5rem; font-weight: 300; }

        /* Weather Overlay */
        #weather-layer {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            pointer-events: none; z-index: 5;
        }

        .rain {
            position: absolute; background-color: rgba(255, 255, 255, 0.6);
            width: 2px; height: 15px; top: -20px;
            animation: fall linear infinite;
        }

        @keyframes fall { to { transform: translateY(100vh); } }
        @keyframes bounce { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-10px); } }

        /* Music Widget */
        #music-box {
            position: absolute; bottom: 20px; right: 20px;
            background: rgba(255, 255, 255, 0.8); padding: 15px;
            border-radius: 15px; box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            z-index: 20; text-align: center;
        }
    </style>
</head>
<body>

<div id="world">
    <div id="weather-layer"></div>
    
    <div id="timer-display">
        <h1 id="status-text">Still Waiting...</h1>
        <div id="countdown">Calculating time...</div>
    </div>

    <div id="path"></div>
    
    <div id="char-me" class="character">üö∂‚Äç‚ôÇÔ∏è</div>
    <div id="char-her" class="character">üö∂‚Äç‚ôÄÔ∏è</div>

    <div id="music-box">
        <div style="font-size: 12px; color: #666;">TODAY'S SONG</div>
        <div id="song-name" style="font-weight: bold; margin: 5px 0;">Loading melody...</div>
        <button onclick="playSong()" style="cursor:pointer; border:none; background:#ff4b2b; color:white; padding:5px 15px; border-radius:20px;">Listen Together</button>
    </div>
</div>

<script>
    // CONFIGURATION
    const START_DATE = new Date("2024-05-21T00:00:00").getTime(); // Set this to today's date
    const TARGET_DATE = new Date("2026-03-01T00:00:00-06:00").getTime(); // March 1st 12am CST
    
    // Songs list - Add your favorites here
    const songs = [
        { name: "First Day - The Moments", url: "https://open.spotify.com" },
        { name: "Thinking of You", url: "https://youtube.com" },
        { name: "Wait for Me", url: "https://spotify.com" }
    ];

    function updateApp() {
        const now = new Date().getTime();
        const timeLeft = TARGET_DATE - now;
        const totalDuration = TARGET_DATE - START_DATE;
        const timePassed = now - START_DATE;

        // 1. COUNTDOWN LOGIC
        if (timeLeft <= 0) {
            document.getElementById("countdown").innerHTML = "00:00:00:00";
            document.getElementById("status-text").innerHTML = "Together Again ‚ù§Ô∏è";
            moveCharacters(100); // 100% progress = Meeting
            return;
        }

        const days = Math.floor(timeLeft / (1000 * 60 * 60 * 24));
        const hours = Math.floor((timeLeft % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
        const minutes = Math.floor((timeLeft % (1000 * 60 * 60)) / (1000 * 60));
        const seconds = Math.floor((timeLeft % (1000 * 60)) / 1000);

        document.getElementById("countdown").innerHTML = 
            `${days}d ${hours}h ${minutes}m ${seconds}s`;

        // 2. MOVEMENT LOGIC
        const progress = (timePassed / totalDuration) * 100;
        moveCharacters(progress);

        // 3. DAY/NIGHT CYCLE LOGIC
        updateSky();
    }

    function moveCharacters(progress) {
        const charMe = document.getElementById("char-me");
        const charHer = document.getElementById("char-her");

        // They start at 5% and 95% and move toward 50%
        const myPos = 5 + (progress * 0.45); 
        const herPos = 95 - (progress * 0.45);

        charMe.style.left = myPos + "%";
        charHer.style.left = herPos + "%";

        if (progress >= 99.9) {
            charMe.innerHTML = "üë©‚Äç‚ù§Ô∏è‚Äçüë®"; // Change to hug emoji at the end
            charHer.style.display = "none";
            charMe.style.animation = "none"; // Stop bouncing when hugging
        }
    }

    function updateSky() {
        const hour = new Date().getHours();
        const world = document.getElementById("world");
        
        if (hour >= 6 && hour < 10) world.style.background = "linear-gradient(#FF9D6C, #FFFB7D)"; // Sunrise
        else if (hour >= 10 && hour < 17) world.style.background = "#87CEEB"; // Day
        else if (hour >= 17 && hour < 20) world.style.background = "linear-gradient(#2c3e50, #fd746c)"; // Sunset
        else world.style.background = "#1a1a2e"; // Night
    }

    function createRain() {
        const weatherLayer = document.getElementById("weather-layer");
        // Simple logic: Change this to true if you want to force rain
        // For demo purposes, we simulate a 30% chance of rain
        const isRaining = Math.random() < 0.3; 

        if(isRaining) {
            for(let i=0; i<50; i++) {
                let drop = document.createElement("div");
                drop.className = "rain";
                drop.style.left = Math.random() * 100 + "vw";
                drop.style.animationDuration = (Math.random() * 0.5 + 0.5) + "s";
                weatherLayer.appendChild(drop);
            }
        }
    }

    function playSong() {
        // Select a song based on the current day (Daily Rotation)
        const dayIndex = Math.floor(Date.now() / (1000 * 60 * 60 * 24));
        const dailySong = songs[dayIndex % songs.length];
        window.open(dailySong.url, '_blank');
    }

    // Initialize song name display
    const initialDayIndex = Math.floor(Date.now() / (1000 * 60 * 60 * 24));
    document.getElementById("song-name").innerText = songs[initialDayIndex % songs.length].name;
    
    setInterval(updateApp, 1000);
    createRain();
    updateApp();
</script>

</body>
</html>