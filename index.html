<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Distance Between Us - 3D</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;600&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <style>
        body { margin: 0; overflow: hidden; font-family: 'Montserrat', sans-serif; background: #feb47b; }
        
        /* Overlay UI */
        #ui-layer {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            pointer-events: none;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: space-between;
            padding: 40px 0;
            z-index: 10;
        }

        .glass-box {
            background: rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(15px);
            -webkit-backdrop-filter: blur(15px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 20px;
            padding: 20px 40px;
            text-align: center;
            color: white;
            box-shadow: 0 8px 32px rgba(0,0,0,0.1);
        }

        h1 { font-size: 1.5rem; letter-spacing: 5px; text-transform: uppercase; margin: 0; font-weight: 300; }
        #timer { font-size: 2.5rem; font-weight: 600; margin-top: 10px; }

        .music-bar {
            width: 300px;
            border-radius: 50px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 25px;
            pointer-events: auto;
        }

        #song-btn {
            background: white;
            color: #ff7e5f;
            border: none;
            padding: 8px 15px;
            border-radius: 20px;
            font-weight: 600;
            cursor: pointer;
            text-decoration: none;
            font-size: 0.8rem;
        }
    </style>
</head>
<body>

    <div id="ui-layer">
        <div class="glass-box">
            <h1>The Distance Between Us</h1>
            <div id="timer">00d 00h 00m 00s</div>
        </div>

        <div class="glass-box music-bar">
            <span>Thinking of You...</span>
            <a href="#" id="song-btn">OPEN SONG</a>
        </div>
    </div>

    <script>
        // --- 1. THREE.JS SCENE SETUP ---
        const scene = new THREE.Scene();
        const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
        const renderer = new THREE.WebGLRenderer({ antialias: true });
        renderer.setSize(window.innerWidth, window.innerHeight);
        renderer.setPixelRatio(window.devicePixelRatio);
        document.body.appendChild(renderer.domElement);

        // Lights (Pixar-style warm lighting)
        const ambientLight = new THREE.AmbientLight(0xffffff, 0.7);
        scene.add(ambientLight);
        const sunLight = new THREE.DirectionalLight(0xffccaa, 1);
        sunLight.position.set(5, 5, 5);
        scene.add(sunLight);

        // --- 2. THE ENVIRONMENT ---
        // Sky Gradient (Simplified via background color)
        scene.background = new THREE.Color(0xfeb47b);
        
        // Ground
        const groundGeo = new THREE.PlaneGeometry(100, 100);
        const groundMat = new THREE.MeshStandardMaterial({ color: 0xda916b, roughness: 0.8 });
        const ground = new THREE.Mesh(groundGeo, groundMat);
        ground.rotation.x = -Math.PI / 2;
        ground.position.y = -2;
        scene.add(ground);

        // --- 3. THE CHARACTERS (Toy-like Figures) ---
        function createCharacter(skinColor) {
            const group = new THREE.Group();
            const bodyMat = new THREE.MeshStandardMaterial({ color: 0xffffff });
            const skinMat = new THREE.MeshStandardMaterial({ color: skinColor });

            // Head
            const head = new THREE.Mesh(new THREE.SphereGeometry(0.3, 32, 32), skinMat);
            head.position.y = 1.6;
            group.add(head);

            // Body
            const torso = new THREE.Mesh(new THREE.CylinderGeometry(0.25, 0.2, 0.8, 32), bodyMat);
            torso.position.y = 1;
            group.add(torso);

            // Legs
            const legGeo = new THREE.CylinderGeometry(0.08, 0.08, 0.7);
            const legL = new THREE.Mesh(legGeo, bodyMat);
            legL.position.set(-0.15, 0.35, 0);
            group.add(legL);

            const legR = new THREE.Mesh(legGeo, bodyMat);
            legR.position.set(0.15, 0.35, 0);
            group.add(legR);

            return { group, legL, legR };
        }

        const male = createCharacter(0x8d5524); // Indian Skin Tone
        const female = createCharacter(0xc68642); 
        scene.add(male.group);
        scene.add(female.group);

        camera.position.z = 5;
        camera.position.y = 0.5;

        // --- 4. ANIMATION & LOGIC ---
        const startDate = new Date("May 1, 2024").getTime();
        const endDate = new Date("March 1, 2026").getTime();

        function animate() {
            requestAnimationFrame(animate);
            const now = new Date().getTime();
            
            // Progress calculation (0 to 1)
            const total = endDate - startDate;
            const current = now - startDate;
            let progress = Math.min(Math.max(current / total, 0), 1);

            // Position characters (meeting at the center)
            const startPos = 6;
            male.group.position.x = -startPos + (startPos * 0.95 * progress);
            female.group.position.x = startPos - (startPos * 0.95 * progress);

            // Walking limb movement
            const time = Date.now() * 0.005;
            const swing = Math.sin(time) * 0.4;
            male.legL.rotation.x = swing;
            male.legR.rotation.x = -swing;
            female.legL.rotation.x = -swing;
            female.legR.rotation.x = swing;

            // Timer Update
            const diff = endDate - now;
            if (diff > 0) {
                const d = Math.floor(diff / (1000 * 60 * 60 * 24));
                const h = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                const m = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
                const s = Math.floor((diff % (1000 * 60)) / 1000);
                document.getElementById("timer").innerHTML = `${d}d ${h}h ${m}m ${s}s`;
            } else {
                document.getElementById("timer").innerHTML = "FINALLY HOME ❤️";
            }

            renderer.render(scene, camera);
        }

        window.addEventListener('resize', () => {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        });

        animate();
    </script>
</body>
</html>